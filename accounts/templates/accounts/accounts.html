{% extends "base.html" %}

{% block content %}
    <form method="post" id="accounts-form">
    {% csrf_token %}
        {{ form.as_p }}
        <p>
            <button type="button" id="clear-checkboxes" class="btn btn-secondary btn-sm">Clear all checkboxes</button>
            <button type="submit" class="btn btn-primary btn-sm">Save</button>
        </p>
    </form>

    <script>
        (function() {
            var btn = document.getElementById('clear-checkboxes');
            if (!btn) return;
            btn.addEventListener('click', function () {
                var form = document.getElementById('accounts-form');
                if (!form) return;
                var boxes = form.querySelectorAll('input[type="checkbox"]');
                boxes.forEach(function(cb) { cb.checked = false; });
                // Submit once after clearing so the server persists the change.
                form.submit();
            });
        })();
    </script>

{% endblock content %}
